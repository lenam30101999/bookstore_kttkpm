create database pttkht_btl;
use pttkht_btl;
CREATE TABLE Item (ItemID int(10) NOT NULL AUTO_INCREMENT, BookID int(10) NULL, CartID int(10) NULL, Name varchar(255), Price double NOT NULL, Quantity int(11), PRIMARY KEY (ItemID));
CREATE TABLE Cart (CartID int(10) NOT NULL AUTO_INCREMENT, totalQuantity int(10) NOT NULL, PRIMARY KEY (CartID));
CREATE TABLE Payment (PayID int(10) NOT NULL AUTO_INCREMENT, ShipmentID int(10) NULL, CartID int(10) NULL, Price double NOT NULL, PRIMARY KEY (PayID));
CREATE TABLE Customer (CustID int(10) NOT NULL AUTO_INCREMENT, PhoneNum varchar(255), FirstName varchar(255), MiddleName varchar(255), LastName varchar(255), City varchar(251), Street varchar(250), Username varchar(250), Password varchar(250), PRIMARY KEY (CustID));
CREATE TABLE Shipment (ShipID int(10) NOT NULL AUTO_INCREMENT, Price double NOT NULL, PRIMARY KEY (ShipID));
CREATE TABLE `Order` (OrderID int(10) NOT NULL AUTO_INCREMENT, PaymentID int(10) NULL, CustomerID int(10) NULL, ShipmentID int(10) NULL, CartID int(10) NULL, `Date` date, Price double NOT NULL, PRIMARY KEY (OrderID));
CREATE TABLE Book (BookID int(10) NOT NULL AUTO_INCREMENT, AuthorID int(10) NOT NULL, PublisherID int(10) NOT NULL, Name varchar(255), NumPage int(10) NOT NULL, PRIMARY KEY (BookID));
CREATE TABLE publisher (PubID int(10) NOT NULL AUTO_INCREMENT, Name varchar(255), PRIMARY KEY (PubID));
CREATE TABLE Author (AuthorID int(10) NOT NULL AUTO_INCREMENT, Name varchar(255), Dob date, PRIMARY KEY (AuthorID));
CREATE TABLE Categories (CateID int(10) NOT NULL AUTO_INCREMENT, Name varchar(255), PRIMARY KEY (CateID));
CREATE TABLE Book_Cate (BookID int(10) NOT NULL, CategoriesID int(10) NOT NULL, PRIMARY KEY (BookID, CategoriesID));
ALTER TABLE Book ADD CONSTRAINT FKBook286846 FOREIGN KEY (PublisherID) REFERENCES publisher (PubID);
ALTER TABLE Book ADD CONSTRAINT FKBook49315 FOREIGN KEY (AuthorID) REFERENCES Author (AuthorID);
ALTER TABLE Book_Cate ADD CONSTRAINT FKBook_Cate649283 FOREIGN KEY (BookID) REFERENCES Book (BookID);
ALTER TABLE Book_Cate ADD CONSTRAINT FKBook_Cate947940 FOREIGN KEY (CategoriesID) REFERENCES Categories (CateID);
ALTER TABLE Item ADD CONSTRAINT FKItem95971 FOREIGN KEY (CartID) REFERENCES Cart (CartID);
ALTER TABLE Payment ADD CONSTRAINT FKPayment587387 FOREIGN KEY (CartID) REFERENCES Cart (CartID);
ALTER TABLE Payment ADD CONSTRAINT FKPayment700570 FOREIGN KEY (ShipmentID) REFERENCES Shipment (ShipID);
ALTER TABLE `Order` ADD CONSTRAINT FKOrder751954 FOREIGN KEY (ShipmentID) REFERENCES Shipment (ShipID);
ALTER TABLE `Order` ADD CONSTRAINT FKOrder670334 FOREIGN KEY (CustomerID) REFERENCES Customer (CustID);
ALTER TABLE `Order` ADD CONSTRAINT FKOrder204426 FOREIGN KEY (PaymentID) REFERENCES Payment (PayID);
ALTER TABLE `Order` ADD CONSTRAINT FKOrder931677 FOREIGN KEY (CartID) REFERENCES Cart (CartID);
ALTER TABLE Item ADD CONSTRAINT FKItem353900 FOREIGN KEY (BookID) REFERENCES Book (BookID);